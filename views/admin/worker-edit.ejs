<!DOCTYPE html>
<!--
Author: Thana Dev 2023
Product Name: Services
-->
<html lang="en">
<!--begin::Head-->

<head>
    <!--Begin Meta links-->
    <%- include ('includes/meta-links.ejs') %>
        <!--End Meta links-->
        <link href="/assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />

</head>
<!--end::Head-->
<!--begin::Body-->

<body onload="startClock()" id="kt_app_body" data-kt-app-layout="dark-sidebar" data-kt-app-header-fixed="true"
    data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="true" data-kt-app-sidebar-hoverable="true"
    data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true"
    data-kt-app-sidebar-push-footer="true" data-kt-app-toolbar-enabled="true" class="app-default">
    <!--begin::Theme mode setup on page load-->

    <!--end::Theme mode setup on page load-->
    <!--begin::App-->
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
        <!--begin::Page-->
        <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
            <!--begin::Header-->
            <%- include('./includes/header.ejs') %>
                <!--end::Header-->
                <!--begin::Wrapper-->
                <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
                    <!--begin::Sidebar-->
                    <%- include('./includes/sidebar.ejs') %>
                        <!--end::Sidebar-->
                        <!--begin::Content-->
                        <div class="content d-flex flex-column flex-column-fluid" id="kt_content">

                            <!--begin::Post-->
                            <div class="post d-flex flex-column-fluid" id="kt_post">
                                <!--begin::Container-->
                                <div id="kt_content_container" class="container-fluid">
                                    <div class="row mt-3">
                                        <div class="col-lg-12">
                                            <!--begin::Form-->
                                            <form class="form mt-5" id="edit-worker-form">
                                                <!--begin::Content wrapper-->
                                                <div class="d-flex flex-column flex-column-fluid card">
                                                    <!--begin::Card body-->
                                                    <div class="card-body border-top pt-5">
                                                        <!--begin::Row-->
                                                        <div class="row">
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Emri dhe mbiemri</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <!--begin::Input-->
                                                                    <p id="full_name-error" class="text-danger show-errors mb-0"></p>
                                                                    <input type="text" class="form-control" name="" id="full_name"
                                                                         value="<%=useri.full_name  %>" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Emri i përdoruesit</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <!--begin::Input-->
                                                                    <p id="username-error" class="text-danger show-errors mb-0"></p>
                                                                    <input type="text" class="form-control" name="" id="username"
                                                                         value="<%=useri.username  %>" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Fjalëkalimi</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <p id="password" class="text-danger show-errors mb-0"></p>
                                                                    <!--begin::Input-->
                                                                    <input type="password" class="form-control" name="" id="password"
                                                                         value="" placeholder="********" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Pozicioni në kompani</span>
                                                                    </label>
                                                                <p id="role-error" class="text-danger show-errors mb-0">
                                                                    <!--end::Label-->
                                                                    <select name="Pozicioni" aria-label="Pozicioni"
                                                                    data-control="select2"
                                                                    data-placeholder="Pozicioni në kompani"
                                                                    class="form-select mb-2" id="role">
                                                                    <option></option>
                                                                    <option value="superadmin" <%=useri.role === 'superadmin'?'selected':'' %>>Admin
                                                                    </option>
                                                                    <option value="managment" <%=useri.role === 'managment'?'selected':'' %>>Menagjment
                                                                    </option>
                                                                    <option value="pos" <%=useri.role === 'pos'?'selected':'' %>>Pos
                                                                    </option>
                                                                </select>
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Privilegjet në kompani</span>
                                                                    </label>
                                                                    <% const managmentAccess=[{value:'sales_many',text:'Shitje me shumic'},{value:'statistic',text:'Statistikat'},{value:'cash_register',text:'Arka'},{value:'stock',text:'Stoku'},{value:'actions',text:'Aksionet'},{value:'offerts',text:'Oferto'},{value:'supply',text:'Furnizimet'},{value:'intern_exhange',text:'Levizje interne'},{value:'article',text:'Artikujt'},{value:'clients',text:'Klientët'},{value:'workers',text:'Puntorët'},{value:'company',text:'Kompania'},{value:'partners',text:'Partnerët'}]
                                                                    const postAccess = [{value:'pos',text:'Pos'},{value:'arc',text:'Arka'}]
                                                                    const adminAccess = [{value:'admin',text:'Admin'}] %>
                                                                    <%  const access={'sales_many':'Shitje me shumic','statistic':'Statistikat','cash_register':'Arka','stock':'Stoku','actions':'Aksionet','offerts':'Oferto','supply':'Furnizimet','intern_exhange':'Levizje interne','article':'Artikujt','clients':'Klientët','workers':'Puntorët','company':'Kompania','partners':'Partnerët','pos':'Pos','arc':'Arka','admin':'Admin'} %>
                                                                    <!--end::Label-->
                                                                    <% const userAccessArray = useri.access.split(',')
                                                                    
                                                                    const accessLabels = userAccessArray.map(accessRight => access[accessRight]); %>
                                                                    <!--begin::Input-->
                                                                    <p id="access-error" class="text-danger show-errors mb-0">
                                                                    <%let useri_accesses%>
                                                                    <%if(useri.role==='superadmin')useri_accesses=adminAccess%>
                                                                    <%if(useri.role==='managment')useri_accesses=managmentAccess%>
                                                                    <%if(useri.role==='pos')useri_accesses=postAccess%>

                                                                  
                                                                    <select name="Pozicioni" aria-label="Pozicioni"
                                                                    data-control="select2" multiple
                                                                    data-placeholder="Pozicioni në kompani"
                                                                    class="form-select mb-2" id="access">
                                                                    <option></option>
                                                                    <%for(let i =0;i<useri_accesses.length;i++){%>
                                                                        <option value="<%=useri_accesses[i]['value']%>" <%=userAccessArray.includes(useri_accesses[i]['value'])?'selected':''%>><%=useri_accesses[i]['text']%></option>
                                                                        <%}%>
                                                                </select>
                                                        
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Njësia</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <!--begin::Input-->
                                                                    <p id="unit-error" class="text-danger show-errors mb-0">
                                                                  
                                                                        <select name="Pozicioni" aria-label="Njesia"
        data-control="select2" <%= useri.role === 'managment' ? 'multiple' : '' %>
        data-placeholder="Pozicioni në kompani"
        class="form-select mb-2" id="unit">
  <option></option>
  <% if (useri.role === 'managment') { %>
    <% for (let i = 0; i < unit.length; i++) { %>
      <option value="<%= unit[i]._id %>" <%= useri.units.includes(unit[i]._id.toString()) ? 'selected' : '' %>><%= unit[i].unit_name %></option>
    <% } %>
  <% } else { %>
    <% for (let i = 0; i < unit.length; i++) { %>
      <option value="<%= unit[i]._id %>" <%= useri.unit._id.toString() === unit[i]._id.toString() ? 'selected' : '' %>><%= unit[i].unit_name %></option>
    <% } %>
  <% } %>
</select>
                                                                    <!--end::Input-->
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Numri personal(opsional)</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <p id="phone_number-error" class="text-danger show-errors mb-0">
                                                                    <!--begin::Input-->
                                                                    <input type="text" class="form-control" name="" id="phone_number"
                                                                         value="<%=useri.phone_number  %>" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Llogari bankare</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <p id="bank-error" class="text-danger show-errors mb-0">
                                                                    <!--begin::Input-->
                                                                    <input type="text" class="form-control" name="" id="bank"
                                                                         value="<%=useri.bank  %>" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Paga neto</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <p id="salary_neto-error" class="text-danger show-errors mb-0">
                                                                    <!--begin::Input-->
                                                                    <input type="text" class="form-control" name="" id="salary_neto"
                                                                         value="<%=useri.salary_neto  %>" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="d-flex flex-column mb-7 fv-row">
                                                                    <!--begin::Label-->
                                                                    <label class="fs-6 fw-semibold form-label mt-3">
                                                                        <span>Paga bruto</span>
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <p id="salary_bruto-error" class="text-danger show-errors mb-0">
                                                                    <!--begin::Input-->
                                                                    <input type="text" class="form-control" name="" id="salary_bruto"
                                                                         value="<%=useri.salary_bruto  %>" />
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <!--end::Col-->
                                                            <!--begin::Col-->
                                                            <div class="col-xl-4 col-lg-6 col-md-4 col-sm-6">
                                                                <!--begin::Input group-->
                                                                <div class="fv-row mb-7">
                                                                    <!--begin::Label-->
                                                                    <label
                                                                        class="col-lg-3 col-form-label fw-semibold fs-6 ">Koment
                                                                    </label>
                                                                    <!--end::Label-->
                                                                    <p id="comment-error" class="text-danger show-errors mb-0">
                                                                    <textarea class="form-control" name=""  id="comment"
                                                                        rows="2"><%=useri.comment  %></textarea>
                                                                    <!--end::Input group-->
                                                                </div>
                                                                <!--end::Input group-->
                                                            </div>
                                                            <div
                                                                class="col-xl-4 col-lg-6 col-md-4 col-sm-6 mt-md-13 mt-3">
                                                                <button id="" type="submit"
                                                                    data-kt-contacts-type="submit"
                                                                    class="btn btn-primary w-100">
                                                                    <span class="indicator-label">Përditso punëtorin</span>
                                                                </button>
                                                                <!--end::Button-->
                                                            </div>
                                                            <!--end::Col-->
                                                        </div>
                                                        <!--end::Row-->
                                                    </div>
                                                </div>

                                            </form>
                                        </div>
                                        <!--end::Form-->
                                      
                                    </div>
                                  
                                </div>
                                <!--end::Container-->
                            </div>
                            <!--end::Post-->
                        </div>
                        <!--end::Content-->

                        <%- include('./includes/footer.ejs') %>
                </div>
                <!--end::Wrapper-->
        </div>
        <!--end::Page-->
    </div>
    <!--end::App-->
    <!--begin::Javascript-->
    <%- include('./includes/script.ejs') %>

        <!--end::Javascript-->
        <script src="/assets/plugins/custom/datatables/datatables.bundle.js"></script>
        <!--begin::Custom Javascript(used for this page only)-->
        <script src="/assets/js/utils.js"></script>
        <script src="/assets/js/worker/editworker.js"></script>

        <!--end::Javascript-->
</body>
<!--end::Body-->

</html>